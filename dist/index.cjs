"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const b=require("react"),P=require("@hookform/resolvers"),y=require("react-hook-form"),je=require("react-select"),Se=require("react-datepicker");var O={exports:{}},x={};var W;function Re(){if(W)return x;W=1;var e=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function t(n,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var u in a)u!=="key"&&(i[u]=a[u])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:s,ref:a!==void 0?a:null,props:i}}return x.Fragment=o,x.jsx=t,x.jsxs=t,x}var F={};var Z;function xe(){return Z||(Z=1,process.env.NODE_ENV!=="production"&&(function(){function e(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===he?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case g:return"Fragment";case de:return"Profiler";case le:return"StrictMode";case ve:return"Suspense";case ye:return"SuspenseList";case be:return"Activity"}if(typeof r=="object")switch(typeof r.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),r.$$typeof){case z:return"Portal";case me:return r.displayName||"Context";case fe:return(r._context.displayName||"Context")+".Consumer";case pe:var c=r.render;return r=r.displayName,r||(r=c.displayName||c.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ee:return c=r.displayName||null,c!==null?c:e(r.type)||"Memo";case N:c=r._payload,r=r._init;try{return e(r(c))}catch{}}return null}function o(r){return""+r}function t(r){try{o(r);var c=!1}catch{c=!0}if(c){c=console;var f=c.error,m=typeof Symbol=="function"&&Symbol.toStringTag&&r[Symbol.toStringTag]||r.constructor.name||"Object";return f.call(c,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",m),o(r)}}function n(r){if(r===g)return"<>";if(typeof r=="object"&&r!==null&&r.$$typeof===N)return"<...>";try{var c=e(r);return c?"<"+c+">":"<...>"}catch{return"<...>"}}function a(){var r=A.A;return r===null?null:r.getOwner()}function i(){return Error("react-stack-top-frame")}function s(r){if(Y.call(r,"key")){var c=Object.getOwnPropertyDescriptor(r,"key").get;if(c&&c.isReactWarning)return!1}return r.key!==void 0}function u(r,c){function f(){M||(M=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",c))}f.isReactWarning=!0,Object.defineProperty(r,"key",{get:f,configurable:!0})}function d(){var r=e(this.type);return V[r]||(V[r]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),r=this.props.ref,r!==void 0?r:null}function v(r,c,f,m,w,I){var p=f.ref;return r={$$typeof:T,type:r,key:c,props:f,_owner:m},(p!==void 0?p:null)!==null?Object.defineProperty(r,"ref",{enumerable:!1,get:d}):Object.defineProperty(r,"ref",{enumerable:!1,value:null}),r._store={},Object.defineProperty(r._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(r,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(r,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:w}),Object.defineProperty(r,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:I}),Object.freeze&&(Object.freeze(r.props),Object.freeze(r)),r}function E(r,c,f,m,w,I){var p=c.children;if(p!==void 0)if(m)if(_e(p)){for(m=0;m<p.length;m++)h(p[m]);Object.freeze&&Object.freeze(p)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else h(p);if(Y.call(c,"key")){p=e(r);var S=Object.keys(c).filter(function(ge){return ge!=="key"});m=0<S.length?"{key: someKey, "+S.join(": ..., ")+": ...}":"{key: someKey}",U[p+m]||(S=0<S.length?"{"+S.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,m,p,S,p),U[p+m]=!0)}if(p=null,f!==void 0&&(t(f),p=""+f),s(c)&&(t(c.key),p=""+c.key),"key"in c){f={};for(var $ in c)$!=="key"&&(f[$]=c[$])}else f=c;return p&&u(f,typeof r=="function"?r.displayName||r.name||"Unknown":r),v(r,p,f,a(),w,I)}function h(r){_(r)?r._store&&(r._store.validated=1):typeof r=="object"&&r!==null&&r.$$typeof===N&&(r._payload.status==="fulfilled"?_(r._payload.value)&&r._payload.value._store&&(r._payload.value._store.validated=1):r._store&&(r._store.validated=1))}function _(r){return typeof r=="object"&&r!==null&&r.$$typeof===T}var j=b,T=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),fe=Symbol.for("react.consumer"),me=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),be=Symbol.for("react.activity"),he=Symbol.for("react.client.reference"),A=j.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=Object.prototype.hasOwnProperty,_e=Array.isArray,C=console.createTask?console.createTask:function(){return null};j={react_stack_bottom_frame:function(r){return r()}};var M,V={},q=j.react_stack_bottom_frame.bind(j,i)(),L=C(n(i)),U={};F.Fragment=g,F.jsx=function(r,c,f){var m=1e4>A.recentlyCreatedOwnerStacks++;return E(r,c,f,!1,m?Error("react-stack-top-frame"):q,m?C(n(r)):L)},F.jsxs=function(r,c,f){var m=1e4>A.recentlyCreatedOwnerStacks++;return E(r,c,f,!0,m?Error("react-stack-top-frame"):q,m?C(n(r)):L)}})()),F}var J;function Fe(){return J||(J=1,process.env.NODE_ENV==="production"?O.exports=Re():O.exports=xe()),O.exports}var l=Fe();function B(e,o,t){function n(u,d){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:d,constr:s,traits:new Set},enumerable:!1}),u._zod.traits.has(e))return;u._zod.traits.add(e),o(u,d);const v=s.prototype,E=Object.keys(v);for(let h=0;h<E.length;h++){const _=E[h];_ in u||(u[_]=v[_].bind(u))}}const a=t?.Parent??Object;class i extends a{}Object.defineProperty(i,"name",{value:e});function s(u){var d;const v=t?.Parent?new i:this;n(v,u),(d=v._zod).deferred??(d.deferred=[]);for(const E of v._zod.deferred)E();return v}return Object.defineProperty(s,"init",{value:n}),Object.defineProperty(s,Symbol.hasInstance,{value:u=>t?.Parent&&u instanceof t.Parent?!0:u?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}class Te extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const we={};function X(e){return we}function Pe(e,o){return typeof o=="bigint"?o.toString():o}const Q="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function k(e){return typeof e=="string"?e:e?.message}function K(e,o,t){const n={...e,path:e.path??[]};if(!e.message){const a=k(e.inst?._zod.def?.error?.(e))??k(o?.error?.(e))??k(t.customError?.(e))??k(t.localeError?.(e))??"Invalid input";n.message=a}return delete n.inst,delete n.continue,o?.reportInput||delete n.input,n}const ee=(e,o)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:o,enumerable:!1}),e.message=JSON.stringify(o,Pe,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Oe=B("$ZodError",ee),re=B("$ZodError",ee,{Parent:Error}),ke=e=>(o,t,n,a)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},s=o._zod.run({value:t,issues:[]},i);if(s instanceof Promise)throw new Te;if(s.issues.length){const u=new(a?.Err??e)(s.issues.map(d=>K(d,i,X())));throw Q(u,a?.callee),u}return s.value},Ne=ke(re),Ae=e=>async(o,t,n,a)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let s=o._zod.run({value:t,issues:[]},i);if(s instanceof Promise&&(s=await s),s.issues.length){const u=new(a?.Err??e)(s.issues.map(d=>K(d,i,X())));throw Q(u,a?.callee),u}return s.value},Ce=Ae(re);function G(e,o){try{var t=e()}catch(n){return o(n)}return t&&t.then?t.then(void 0,o):t}function Ie(e,o){for(var t={};e.length;){var n=e[0],a=n.code,i=n.message,s=n.path.join(".");if(!t[s])if("unionErrors"in n){var u=n.unionErrors[0].errors[0];t[s]={message:u.message,type:u.code}}else t[s]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(E){return E.errors.forEach(function(h){return e.push(h)})}),o){var d=t[s].types,v=d&&d[n.code];t[s]=y.appendErrors(s,o,t,a,v?[].concat(v,n.message):n.message)}e.shift()}return t}function $e(e,o){for(var t={};e.length;){var n=e[0],a=n.code,i=n.message,s=n.path.join(".");if(!t[s])if(n.code==="invalid_union"&&n.errors.length>0){var u=n.errors[0][0];t[s]={message:u.message,type:u.code}}else t[s]={message:i,type:a};if(n.code==="invalid_union"&&n.errors.forEach(function(E){return E.forEach(function(h){return e.push(h)})}),o){var d=t[s].types,v=d&&d[n.code];t[s]=y.appendErrors(s,o,t,a,v?[].concat(v,n.message):n.message)}e.shift()}return t}function De(e,o,t){if(t===void 0&&(t={}),(function(n){return"_def"in n&&typeof n._def=="object"&&"typeName"in n._def})(e))return function(n,a,i){try{return Promise.resolve(G(function(){return Promise.resolve(e[t.mode==="sync"?"parse":"parseAsync"](n,o)).then(function(s){return i.shouldUseNativeValidation&&P.validateFieldsNatively({},i),{errors:{},values:t.raw?Object.assign({},n):s}})},function(s){if((function(u){return Array.isArray(u?.issues)})(s))return{values:{},errors:P.toNestErrors(Ie(s.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw s}))}catch(s){return Promise.reject(s)}};if((function(n){return"_zod"in n&&typeof n._zod=="object"})(e))return function(n,a,i){try{return Promise.resolve(G(function(){return Promise.resolve((t.mode==="sync"?Ne:Ce)(e,n,o)).then(function(s){return i.shouldUseNativeValidation&&P.validateFieldsNatively({},i),{errors:{},values:t.raw?Object.assign({},n):s}})},function(s){if((function(u){return u instanceof Oe})(s))return{values:{},errors:P.toNestErrors($e(s.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw s}))}catch(s){return Promise.reject(s)}};throw new Error("Invalid input: not a Zod schema")}const ze=(e="",o="post")=>async t=>{await fetch(e,{method:o,body:JSON.stringify(t)}).then(async n=>{console.log(n)})},Ye=({form:e,children:o,...t})=>{const n=t?.onSubmit||ze(t?.action??"",t?.method);return l.jsx(y.FormProvider,{...e,children:l.jsx("form",{noValidate:!0,...t,onSubmit:e.handleSubmit(n),children:l.jsx("fieldset",{children:o})})})};function Me(e,o){return y.useForm({...o,resolver:De(e)})}function te(...e){const o=[];for(let t=0;t<e.length;t+=1){const n=e[t];Array.isArray(n)?o.push(te.apply(null,n)):typeof n=="object"?Object.entries(n).map(([a,i])=>i?o.push(a):!0):typeof n=="string"&&o.push(n.trim())}return o.join(" ")}function R(e){return t=>{const{isSubmitted:n}=y.useFormState(),a=Ve(t?.name??""),i=t?.id||b.useId();return l.jsxs(D,{label:t?.label,id:i,required:t?.required||!1,hasError:!!a,isSubmitted:n,children:[l.jsx(e,{...t,label:null,id:i}),a&&l.jsx(ne,{error:a})]})}}const D=b.memo(({id:e,label:o,required:t,hasError:n,isSubmitted:a,children:i})=>l.jsxs("div",{className:te("field-control",{required:t,"is-invalid":n,"is-valid":!n&&a}),children:[o&&l.jsx("label",{htmlFor:e,children:o||null}),i]}));D.displayName="FieldControl";const Ve=e=>{const{errors:o,isSubmitted:t}=y.useFormState({name:e});if(!t)return;const n=e.split(".");let a=o;for(const i of n)a=a?.[i]||void 0;return Array.isArray(a)&&(a=a[0]),a},ne=b.memo(({error:e})=>e&&l.jsx("div",{className:"field-error","data-error-type":e?.type||null,children:e?.message||null}));ne.displayName="ErrorMessage";class H extends Error{code;constructor(o,t,n){super(o,n),this.code=t,this.name="ServerError"}}const qe=({templateId:e})=>{const o=b.useRef(null);return b.useEffect(()=>{const t=document.getElementById(e);t&&o.current&&(o.current.innerHTML="",o.current.appendChild(t.content.cloneNode(!0)))},[]),l.jsx("div",{ref:o,className:"form-loading-indicator"})};async function oe(e){return fetch(e,{method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then(async o=>{if(o.status!==200)throw new H("server error",o.status);return await o.json().catch(t=>{throw new H("Bad response from server",500,{cause:t})})})}const Le=(e,o,t={})=>{const n={templateId:"form-loading-indicator",retry:!0,...t};return function(i){const[s,u]=b.useState(!0),[d,v]=b.useState(null),[E,h]=b.useState({}),[_,j]=b.useState(Date.now());b.useEffect(()=>{v(null),u(!0),oe(o).then(g=>{h(g)}).catch(g=>{v(g)}).finally(()=>u(!1))},[_]);const T=()=>{j(Date.now())};return s?l.jsx(qe,{templateId:n?.templateId}):d?l.jsxs("div",{className:"form-server-errors",children:[d?.message,n?.retry&&l.jsx("button",{type:"button",onClick:T,children:"Retry"})]}):l.jsx(e,{...i,...E})}},se=({name:e,type:o="text",...t})=>{const{register:n}=y.useFormContext();return l.jsx("input",{type:o,...n(e),...t})};se.displayName="FieldInput";const Ue=R(se),ae=({name:e,...o})=>{const{register:t}=y.useFormContext();return l.jsx("textarea",{...t(e),...o})};ae.displayName="FieldTextarea";const We=R(ae),ie=({name:e,children:o,...t})=>{const{register:n}=y.useFormContext();return l.jsx("select",{...n(e),...t,children:o})};ie.displayName="FieldNativeSelect";const Ze=R(ie),Je=(e,o)=>{const t=a=>a.flatMap(i=>i.options?t(i.options):[i]),n=t(o);return Array.isArray(e)?n.filter(a=>e.includes(a.value))||[]:n.find(a=>a.value===e)||null},ue=({name:e,options:o=[],...t})=>{const{resetField:n,formState:{defaultValues:a}}=y.useFormContext(),i=b.useRef(!1);return b.useEffect(()=>{const s=e.split(".");let u=a;for(const d of s)u=u?.[d]||null;n(e,{defaultValue:Je(u,o)}),i.current=!0},[]),l.jsx(y.Controller,{name:e,render:({field:s})=>l.jsx(je,{...s,value:i.current&&s.value,inputId:t?.id,options:o||[],...t,id:void 0})})};ue.displayName="FieldReactSelect";const Ge=R(ue),ce=({name:e,...o})=>l.jsx(y.Controller,{name:e,render:({field:t})=>l.jsx(Se,{...t,selected:t.value??null,...o})});ce.displayName="FieldDatepicker";const He=R(ce),Be=({name:e,...o})=>{const{register:t}=y.useFormContext();return l.jsx("input",{type:"hidden",...t(e),...o})},Xe=({label:e,...o})=>{const{isDirty:t,isSubmitting:n}=y.useFormState();return l.jsx("button",{type:"submit",disabled:!t||n,...o,children:e||""})};exports.FieldControl=D;exports.FieldDatepicker=He;exports.FieldHidden=Be;exports.FieldInput=Ue;exports.FieldNativeSelect=Ze;exports.FieldReactSelect=Ge;exports.FieldTextarea=We;exports.Form=Ye;exports.Submit=Xe;exports.createZodForm=Me;exports.fetchDefaultValues=oe;exports.withFieldControl=R;exports.withFormLoader=Le;
