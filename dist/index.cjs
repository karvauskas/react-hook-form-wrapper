"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const b=require("react"),N=require("@hookform/resolvers"),h=require("react-hook-form"),j=require("zod"),Re=require("react-select"),xe=require("react-datepicker");var O={exports:{}},F={};var Z;function Fe(){if(Z)return F;Z=1;var e=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function r(t,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var c in i)c!=="key"&&(s[c]=i[c])}else s=i;return i=s.ref,{$$typeof:e,type:t,key:a,ref:i!==void 0?i:null,props:s}}return F.Fragment=o,F.jsx=r,F.jsxs=r,F}var T={};var G;function Te(){return G||(G=1,process.env.NODE_ENV!=="production"&&(function(){function e(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===_e?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _:return"Fragment";case me:return"Profiler";case fe:return"StrictMode";case he:return"Suspense";case be:return"SuspenseList";case ge:return"Activity"}if(typeof n=="object")switch(typeof n.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),n.$$typeof){case q:return"Portal";case ve:return n.displayName||"Context";case pe:return(n._context.displayName||"Context")+".Consumer";case ye:var u=n.render;return n=n.displayName,n||(n=u.displayName||u.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ee:return u=n.displayName||null,u!==null?u:e(n.type)||"Memo";case A:u=n._payload,n=n._init;try{return e(n(u))}catch{}}return null}function o(n){return""+n}function r(n){try{o(n);var u=!1}catch{u=!0}if(u){u=console;var m=u.error,p=typeof Symbol=="function"&&Symbol.toStringTag&&n[Symbol.toStringTag]||n.constructor.name||"Object";return m.call(u,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",p),o(n)}}function t(n){if(n===_)return"<>";if(typeof n=="object"&&n!==null&&n.$$typeof===A)return"<...>";try{var u=e(n);return u?"<"+u+">":"<...>"}catch{return"<...>"}}function i(){var n=C.A;return n===null?null:n.getOwner()}function s(){return Error("react-stack-top-frame")}function a(n){if(Y.call(n,"key")){var u=Object.getOwnPropertyDescriptor(n,"key").get;if(u&&u.isReactWarning)return!1}return n.key!==void 0}function c(n,u){function m(){M||(M=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",u))}m.isReactWarning=!0,Object.defineProperty(n,"key",{get:m,configurable:!0})}function l(){var n=e(this.type);return L[n]||(L[n]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),n=this.props.ref,n!==void 0?n:null}function d(n,u,m,p,P,V){var v=m.ref;return n={$$typeof:w,type:n,key:u,props:m,_owner:p},(v!==void 0?v:null)!==null?Object.defineProperty(n,"ref",{enumerable:!1,get:l}):Object.defineProperty(n,"ref",{enumerable:!1,value:null}),n._store={},Object.defineProperty(n._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(n,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(n,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:P}),Object.defineProperty(n,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:V}),Object.freeze&&(Object.freeze(n.props),Object.freeze(n)),n}function y(n,u,m,p,P,V){var v=u.children;if(v!==void 0)if(p)if(je(v)){for(p=0;p<v.length;p++)E(v[p]);Object.freeze&&Object.freeze(v)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else E(v);if(Y.call(u,"key")){v=e(n);var R=Object.keys(u).filter(function(Se){return Se!=="key"});p=0<R.length?"{key: someKey, "+R.join(": ..., ")+": ...}":"{key: someKey}",J[v+p]||(R=0<R.length?"{"+R.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,p,v,R,v),J[v+p]=!0)}if(v=null,m!==void 0&&(r(m),v=""+m),a(u)&&(r(u.key),v=""+u.key),"key"in u){m={};for(var $ in u)$!=="key"&&(m[$]=u[$])}else m=u;return v&&c(m,typeof n=="function"?n.displayName||n.name||"Unknown":n),d(n,v,m,i(),P,V)}function E(n){g(n)?n._store&&(n._store.validated=1):typeof n=="object"&&n!==null&&n.$$typeof===A&&(n._payload.status==="fulfilled"?g(n._payload.value)&&n._payload.value._store&&(n._payload.value._store.validated=1):n._store&&(n._store.validated=1))}function g(n){return typeof n=="object"&&n!==null&&n.$$typeof===w}var S=b,w=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),pe=Symbol.for("react.consumer"),ve=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),ge=Symbol.for("react.activity"),_e=Symbol.for("react.client.reference"),C=S.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=Object.prototype.hasOwnProperty,je=Array.isArray,I=console.createTask?console.createTask:function(){return null};S={react_stack_bottom_frame:function(n){return n()}};var M,L={},U=S.react_stack_bottom_frame.bind(S,s)(),W=I(t(s)),J={};T.Fragment=_,T.jsx=function(n,u,m){var p=1e4>C.recentlyCreatedOwnerStacks++;return y(n,u,m,!1,p?Error("react-stack-top-frame"):U,p?I(t(n)):W)},T.jsxs=function(n,u,m){var p=1e4>C.recentlyCreatedOwnerStacks++;return y(n,u,m,!0,p?Error("react-stack-top-frame"):U,p?I(t(n)):W)}})()),T}var H;function we(){return H||(H=1,process.env.NODE_ENV==="production"?O.exports=Fe():O.exports=Te()),O.exports}var f=we();function Q(e,o,r){function t(c,l){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:l,constr:a,traits:new Set},enumerable:!1}),c._zod.traits.has(e))return;c._zod.traits.add(e),o(c,l);const d=a.prototype,y=Object.keys(d);for(let E=0;E<y.length;E++){const g=y[E];g in c||(c[g]=d[g].bind(c))}}const i=r?.Parent??Object;class s extends i{}Object.defineProperty(s,"name",{value:e});function a(c){var l;const d=r?.Parent?new s:this;t(d,c),(l=d._zod).deferred??(l.deferred=[]);for(const y of d._zod.deferred)y();return d}return Object.defineProperty(a,"init",{value:t}),Object.defineProperty(a,Symbol.hasInstance,{value:c=>r?.Parent&&c instanceof r.Parent?!0:c?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}class Pe extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Ne={};function K(e){return Ne}function Oe(e,o){return typeof o=="bigint"?o.toString():o}const ee="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function k(e){return typeof e=="string"?e:e?.message}function re(e,o,r){const t={...e,path:e.path??[]};if(!e.message){const i=k(e.inst?._zod.def?.error?.(e))??k(o?.error?.(e))??k(r.customError?.(e))??k(r.localeError?.(e))??"Invalid input";t.message=i}return delete t.inst,delete t.continue,o?.reportInput||delete t.input,t}const te=(e,o)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:o,enumerable:!1}),e.message=JSON.stringify(o,Oe,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},ke=Q("$ZodError",te),ne=Q("$ZodError",te,{Parent:Error}),Ae=e=>(o,r,t,i)=>{const s=t?Object.assign(t,{async:!1}):{async:!1},a=o._zod.run({value:r,issues:[]},s);if(a instanceof Promise)throw new Pe;if(a.issues.length){const c=new(i?.Err??e)(a.issues.map(l=>re(l,s,K())));throw ee(c,i?.callee),c}return a.value},Ce=Ae(ne),Ie=e=>async(o,r,t,i)=>{const s=t?Object.assign(t,{async:!0}):{async:!0};let a=o._zod.run({value:r,issues:[]},s);if(a instanceof Promise&&(a=await a),a.issues.length){const c=new(i?.Err??e)(a.issues.map(l=>re(l,s,K())));throw ee(c,i?.callee),c}return a.value},Ve=Ie(ne);function B(e,o){try{var r=e()}catch(t){return o(t)}return r&&r.then?r.then(void 0,o):r}function $e(e,o){for(var r={};e.length;){var t=e[0],i=t.code,s=t.message,a=t.path.join(".");if(!r[a])if("unionErrors"in t){var c=t.unionErrors[0].errors[0];r[a]={message:c.message,type:c.code}}else r[a]={message:s,type:i};if("unionErrors"in t&&t.unionErrors.forEach(function(y){return y.errors.forEach(function(E){return e.push(E)})}),o){var l=r[a].types,d=l&&l[t.code];r[a]=h.appendErrors(a,o,r,i,d?[].concat(d,t.message):t.message)}e.shift()}return r}function De(e,o){for(var r={};e.length;){var t=e[0],i=t.code,s=t.message,a=t.path.join(".");if(!r[a])if(t.code==="invalid_union"&&t.errors.length>0){var c=t.errors[0][0];r[a]={message:c.message,type:c.code}}else r[a]={message:s,type:i};if(t.code==="invalid_union"&&t.errors.forEach(function(y){return y.forEach(function(E){return e.push(E)})}),o){var l=r[a].types,d=l&&l[t.code];r[a]=h.appendErrors(a,o,r,i,d?[].concat(d,t.message):t.message)}e.shift()}return r}function ze(e,o,r){if(r===void 0&&(r={}),(function(t){return"_def"in t&&typeof t._def=="object"&&"typeName"in t._def})(e))return function(t,i,s){try{return Promise.resolve(B(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](t,o)).then(function(a){return s.shouldUseNativeValidation&&N.validateFieldsNatively({},s),{errors:{},values:r.raw?Object.assign({},t):a}})},function(a){if((function(c){return Array.isArray(c?.issues)})(a))return{values:{},errors:N.toNestErrors($e(a.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw a}))}catch(a){return Promise.reject(a)}};if((function(t){return"_zod"in t&&typeof t._zod=="object"})(e))return function(t,i,s){try{return Promise.resolve(B(function(){return Promise.resolve((r.mode==="sync"?Ce:Ve)(e,t,o)).then(function(a){return s.shouldUseNativeValidation&&N.validateFieldsNatively({},s),{errors:{},values:r.raw?Object.assign({},t):a}})},function(a){if((function(c){return c instanceof ke})(a))return{values:{},errors:N.toNestErrors(De(a.issues,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw a}))}catch(a){return Promise.reject(a)}};throw new Error("Invalid input: not a Zod schema")}function oe(e,o){return o?Object.keys(e).reduce((r,t)=>{const i=o[t],s=e[t];return r[t]=s&&typeof s=="object"&&!Array.isArray(s)&&i&&typeof i=="object"&&!Array.isArray(i)?oe(s,i):i!==void 0?i:s,r},{}):{...e}}const qe=(e="",o="post")=>async r=>{await fetch(e,{method:o,body:JSON.stringify(r)}).then(async t=>{console.log(t)})},Ye=({form:e,children:o,disabled:r,...t})=>{const i=t?.onSubmit||qe(t?.action??"",t?.method);return f.jsx(h.FormProvider,{...e,children:f.jsx("form",{noValidate:!0,...t,onSubmit:e.handleSubmit(i),children:f.jsx("fieldset",{className:"form-scope",disabled:r,children:o})})})};function Me(e,o){return h.useForm({...o,defaultValues:oe(e.defaultValues,o?.defaultValues),resolver:ze(e?.schema)})}function Le(e){function o(s){return s&&"schema"in s&&"defaultValue"in s}const r=s=>{const a={},c={};for(const l in s){const d=s[l];if(o(d))a[l]=d?.schema,c[l]=d?.defaultValue;else{const y=r(d);a[l]=j.object(y?.schema),c[l]=y?.defaultValues}}return{schema:a,defaultValues:c}},{schema:t,defaultValues:i}=r(e);return{schema:j.object(t),defaultValues:i}}const Ue={string:(e=j.string(),o="")=>({schema:j.preprocess(r=>r?String(r):void 0,e),defaultValue:o}),number:(e=j.number(),o="")=>({schema:j.preprocess(r=>r?Number(r):void 0,e),defaultValue:o})};j.config({customError:e=>{if(e.code==="invalid_type")return e.input===void 0?"Required":void 0}});function D(...e){const o=[];for(let r=0;r<e.length;r+=1){const t=e[r];Array.isArray(t)?o.push(D.apply(null,t)):typeof t=="object"?Object.entries(t).map(([i,s])=>s?o.push(i):!0):typeof t=="string"&&o.push(t.trim())}return o.join(" ")}function x(e){return r=>{if(!r?.name)return;const{isSubmitted:t}=h.useFormState(),i=Je(r?.name??""),s=r?.id||b.useId(),a=[r?.className,"field"].filter(y=>y).join(" "),{label:c,addons:l,...d}=r;return console.log(r?.name),f.jsx(z,{label:c,id:s,required:r?.required||!1,error:i,isSubmitted:t,addons:l,children:f.jsx(e,{...d,id:s,className:a,"aria-invalid":i?!0:null})})}}const z=b.memo(({children:e,id:o,label:r,required:t,error:i,isSubmitted:s,addons:a})=>f.jsxs("div",{className:D("form-control",{required:t,"is-invalid":!!i,"is-valid":!i&&s}),children:[r&&f.jsx("label",{htmlFor:o,children:r||null}),a?f.jsx(We,{addons:a,children:e}):e,i&&f.jsx(se,{error:i})]}));z.displayName="FieldControl";const We=({children:e,addons:{prepend:o,append:r}})=>{const t=(i=[])=>i.map((s,a)=>f.jsx("div",{className:D("field-addon",{"field-addon-text":typeof s=="string"}),children:s},`addon-${a}`));return f.jsxs("div",{className:"with-addons",children:[t(o),e,t(r)]})},Je=e=>{const{errors:o,isSubmitted:r}=h.useFormState({name:e});if(!r)return;const t=e.split(".");let i=o;for(const s of t)i=i?.[s]||void 0;return Array.isArray(i)&&(i=i[0]),i},se=b.memo(({error:e})=>e&&f.jsx("div",{className:"invalid-feedback","data-error-type":e?.type||null,children:e?.message||null}));se.displayName="ErrorMessage";class X extends Error{code;constructor(o,r,t){super(o,t),this.code=r,this.name="ServerError"}}const Ze=({templateId:e})=>{const o=b.useRef(null);return b.useEffect(()=>{const r=document.getElementById(e);r&&o.current&&(o.current.innerHTML="",o.current.appendChild(r.content.cloneNode(!0)))},[]),f.jsx("div",{ref:o,className:"form-loading-indicator"})};async function ae(e){return fetch(e,{method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then(async o=>{if(o.status!==200)throw new X("server error",o.status);return await o.json().catch(r=>{throw new X("Bad response from server",500,{cause:r})})})}const Ge=(e,o,r={})=>{const t={templateId:"form-loading-indicator",retry:!0,...r};return function(s){const[a,c]=b.useState(!0),[l,d]=b.useState(null),[y,E]=b.useState({}),[g,S]=b.useState(Date.now());b.useEffect(()=>{d(null),c(!0),ae(o).then(_=>{E(_)}).catch(_=>{d(_)}).finally(()=>c(!1))},[g]);const w=()=>{S(Date.now())};return a?f.jsx(Ze,{templateId:t?.templateId}):l?f.jsxs("div",{className:"form-server-errors",children:[l?.message,t?.retry&&f.jsx("button",{type:"button",onClick:w,children:"Retry"})]}):f.jsx(e,{...s,...y})}},ie=({name:e,type:o="text",...r})=>{const{register:t}=h.useFormContext();return f.jsx("input",{type:o,...t(e),...r})};ie.displayName="FieldInput";const He=x(ie),ce=({name:e,...o})=>{const{register:r}=h.useFormContext();return f.jsx("textarea",{...r(e),...o})};ce.displayName="FieldTextarea";const Be=x(ce),ue=({name:e,children:o,...r})=>{const{register:t}=h.useFormContext();return f.jsx("select",{...t(e),...r,children:o})};ue.displayName="FieldNativeSelect";const Xe=x(ue),Qe=(e,o)=>{const r=i=>i.flatMap(s=>s.options?r(s.options):[s]),t=r(o);return Array.isArray(e)?t.filter(i=>e.includes(i.value))||[]:t.find(i=>i.value===e)||null},le=({name:e,options:o=[],...r})=>{const{resetField:t,formState:{defaultValues:i}}=h.useFormContext(),s=b.useRef(!1);b.useEffect(()=>{const c=e.split(".");let l=i;for(const d of c)l=l?.[d]||null;t(e,{defaultValue:Qe(l,o)}),s.current=!0},[]);const a=r?.className?.replace("field","");return f.jsx(h.Controller,{name:e,render:({field:c})=>f.jsx(Re,{...c,value:s.current&&c.value,inputId:r?.id,options:o||[],classNamePrefix:"react-select",unstyled:!0,...r,className:[a,"react-select-container"].join(" "),id:void 0})})};le.displayName="FieldReactSelect";const Ke=x(le),de=({name:e,...o})=>f.jsx(h.Controller,{name:e,render:({field:r})=>f.jsx(xe,{...r,selected:r.value??null,...o})});de.displayName="FieldDatepicker";const er=x(de),rr=({name:e,...o})=>{const{register:r}=h.useFormContext();return f.jsx("input",{type:"hidden",...r(e),...o})},tr=({label:e,...o})=>{const{isDirty:r,isSubmitting:t}=h.useFormState();return f.jsx("button",{type:"submit",disabled:!r||t,...o,children:e||""})};exports.FieldControl=z;exports.FieldDatepicker=er;exports.FieldHidden=rr;exports.FieldInput=He;exports.FieldNativeSelect=Xe;exports.FieldReactSelect=Ke;exports.FieldTextarea=Be;exports.Form=Ye;exports.Submit=tr;exports.createForm=Me;exports.createSchema=Le;exports.fetchDefaultValues=ae;exports.field=Ue;exports.withFieldControl=x;exports.withFormLoader=Ge;
