"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const h=require("react"),P=require("@hookform/resolvers"),y=require("react-hook-form"),je=require("react-select"),Re=require("react-datepicker");var O={exports:{}},x={};var W;function Se(){if(W)return x;W=1;var e=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function n(t,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:e,type:t,key:s,ref:i!==void 0?i:null,props:a}}return x.Fragment=o,x.jsx=n,x.jsxs=n,x}var F={};var Z;function xe(){return Z||(Z=1,process.env.NODE_ENV!=="production"&&(function(){function e(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===be?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case g:return"Fragment";case de:return"Profiler";case le:return"StrictMode";case ve:return"Suspense";case ye:return"SuspenseList";case he:return"Activity"}if(typeof r=="object")switch(typeof r.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),r.$$typeof){case z:return"Portal";case me:return r.displayName||"Context";case fe:return(r._context.displayName||"Context")+".Consumer";case pe:var c=r.render;return r=r.displayName,r||(r=c.displayName||c.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ee:return c=r.displayName||null,c!==null?c:e(r.type)||"Memo";case N:c=r._payload,r=r._init;try{return e(r(c))}catch{}}return null}function o(r){return""+r}function n(r){try{o(r);var c=!1}catch{c=!0}if(c){c=console;var f=c.error,m=typeof Symbol=="function"&&Symbol.toStringTag&&r[Symbol.toStringTag]||r.constructor.name||"Object";return f.call(c,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",m),o(r)}}function t(r){if(r===g)return"<>";if(typeof r=="object"&&r!==null&&r.$$typeof===N)return"<...>";try{var c=e(r);return c?"<"+c+">":"<...>"}catch{return"<...>"}}function i(){var r=A.A;return r===null?null:r.getOwner()}function a(){return Error("react-stack-top-frame")}function s(r){if(Y.call(r,"key")){var c=Object.getOwnPropertyDescriptor(r,"key").get;if(c&&c.isReactWarning)return!1}return r.key!==void 0}function u(r,c){function f(){M||(M=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",c))}f.isReactWarning=!0,Object.defineProperty(r,"key",{get:f,configurable:!0})}function d(){var r=e(this.type);return V[r]||(V[r]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),r=this.props.ref,r!==void 0?r:null}function v(r,c,f,m,w,I){var p=f.ref;return r={$$typeof:T,type:r,key:c,props:f,_owner:m},(p!==void 0?p:null)!==null?Object.defineProperty(r,"ref",{enumerable:!1,get:d}):Object.defineProperty(r,"ref",{enumerable:!1,value:null}),r._store={},Object.defineProperty(r._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(r,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(r,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:w}),Object.defineProperty(r,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:I}),Object.freeze&&(Object.freeze(r.props),Object.freeze(r)),r}function E(r,c,f,m,w,I){var p=c.children;if(p!==void 0)if(m)if(_e(p)){for(m=0;m<p.length;m++)b(p[m]);Object.freeze&&Object.freeze(p)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else b(p);if(Y.call(c,"key")){p=e(r);var R=Object.keys(c).filter(function(ge){return ge!=="key"});m=0<R.length?"{key: someKey, "+R.join(": ..., ")+": ...}":"{key: someKey}",U[p+m]||(R=0<R.length?"{"+R.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,m,p,R,p),U[p+m]=!0)}if(p=null,f!==void 0&&(n(f),p=""+f),s(c)&&(n(c.key),p=""+c.key),"key"in c){f={};for(var $ in c)$!=="key"&&(f[$]=c[$])}else f=c;return p&&u(f,typeof r=="function"?r.displayName||r.name||"Unknown":r),v(r,p,f,i(),w,I)}function b(r){_(r)?r._store&&(r._store.validated=1):typeof r=="object"&&r!==null&&r.$$typeof===N&&(r._payload.status==="fulfilled"?_(r._payload.value)&&r._payload.value._store&&(r._payload.value._store.validated=1):r._store&&(r._store.validated=1))}function _(r){return typeof r=="object"&&r!==null&&r.$$typeof===T}var j=h,T=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),fe=Symbol.for("react.consumer"),me=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),he=Symbol.for("react.activity"),be=Symbol.for("react.client.reference"),A=j.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=Object.prototype.hasOwnProperty,_e=Array.isArray,C=console.createTask?console.createTask:function(){return null};j={react_stack_bottom_frame:function(r){return r()}};var M,V={},q=j.react_stack_bottom_frame.bind(j,a)(),L=C(t(a)),U={};F.Fragment=g,F.jsx=function(r,c,f){var m=1e4>A.recentlyCreatedOwnerStacks++;return E(r,c,f,!1,m?Error("react-stack-top-frame"):q,m?C(t(r)):L)},F.jsxs=function(r,c,f){var m=1e4>A.recentlyCreatedOwnerStacks++;return E(r,c,f,!0,m?Error("react-stack-top-frame"):q,m?C(t(r)):L)}})()),F}var J;function Fe(){return J||(J=1,process.env.NODE_ENV==="production"?O.exports=Se():O.exports=xe()),O.exports}var l=Fe();function B(e,o,n){function t(u,d){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:d,constr:s,traits:new Set},enumerable:!1}),u._zod.traits.has(e))return;u._zod.traits.add(e),o(u,d);const v=s.prototype,E=Object.keys(v);for(let b=0;b<E.length;b++){const _=E[b];_ in u||(u[_]=v[_].bind(u))}}const i=n?.Parent??Object;class a extends i{}Object.defineProperty(a,"name",{value:e});function s(u){var d;const v=n?.Parent?new a:this;t(v,u),(d=v._zod).deferred??(d.deferred=[]);for(const E of v._zod.deferred)E();return v}return Object.defineProperty(s,"init",{value:t}),Object.defineProperty(s,Symbol.hasInstance,{value:u=>n?.Parent&&u instanceof n.Parent?!0:u?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}class Te extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const we={};function X(e){return we}function Pe(e,o){return typeof o=="bigint"?o.toString():o}const Q="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function k(e){return typeof e=="string"?e:e?.message}function K(e,o,n){const t={...e,path:e.path??[]};if(!e.message){const i=k(e.inst?._zod.def?.error?.(e))??k(o?.error?.(e))??k(n.customError?.(e))??k(n.localeError?.(e))??"Invalid input";t.message=i}return delete t.inst,delete t.continue,o?.reportInput||delete t.input,t}const ee=(e,o)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:o,enumerable:!1}),e.message=JSON.stringify(o,Pe,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Oe=B("$ZodError",ee),re=B("$ZodError",ee,{Parent:Error}),ke=e=>(o,n,t,i)=>{const a=t?Object.assign(t,{async:!1}):{async:!1},s=o._zod.run({value:n,issues:[]},a);if(s instanceof Promise)throw new Te;if(s.issues.length){const u=new(i?.Err??e)(s.issues.map(d=>K(d,a,X())));throw Q(u,i?.callee),u}return s.value},Ne=ke(re),Ae=e=>async(o,n,t,i)=>{const a=t?Object.assign(t,{async:!0}):{async:!0};let s=o._zod.run({value:n,issues:[]},a);if(s instanceof Promise&&(s=await s),s.issues.length){const u=new(i?.Err??e)(s.issues.map(d=>K(d,a,X())));throw Q(u,i?.callee),u}return s.value},Ce=Ae(re);function G(e,o){try{var n=e()}catch(t){return o(t)}return n&&n.then?n.then(void 0,o):n}function Ie(e,o){for(var n={};e.length;){var t=e[0],i=t.code,a=t.message,s=t.path.join(".");if(!n[s])if("unionErrors"in t){var u=t.unionErrors[0].errors[0];n[s]={message:u.message,type:u.code}}else n[s]={message:a,type:i};if("unionErrors"in t&&t.unionErrors.forEach(function(E){return E.errors.forEach(function(b){return e.push(b)})}),o){var d=n[s].types,v=d&&d[t.code];n[s]=y.appendErrors(s,o,n,i,v?[].concat(v,t.message):t.message)}e.shift()}return n}function $e(e,o){for(var n={};e.length;){var t=e[0],i=t.code,a=t.message,s=t.path.join(".");if(!n[s])if(t.code==="invalid_union"&&t.errors.length>0){var u=t.errors[0][0];n[s]={message:u.message,type:u.code}}else n[s]={message:a,type:i};if(t.code==="invalid_union"&&t.errors.forEach(function(E){return E.forEach(function(b){return e.push(b)})}),o){var d=n[s].types,v=d&&d[t.code];n[s]=y.appendErrors(s,o,n,i,v?[].concat(v,t.message):t.message)}e.shift()}return n}function De(e,o,n){if(n===void 0&&(n={}),(function(t){return"_def"in t&&typeof t._def=="object"&&"typeName"in t._def})(e))return function(t,i,a){try{return Promise.resolve(G(function(){return Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](t,o)).then(function(s){return a.shouldUseNativeValidation&&P.validateFieldsNatively({},a),{errors:{},values:n.raw?Object.assign({},t):s}})},function(s){if((function(u){return Array.isArray(u?.issues)})(s))return{values:{},errors:P.toNestErrors(Ie(s.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw s}))}catch(s){return Promise.reject(s)}};if((function(t){return"_zod"in t&&typeof t._zod=="object"})(e))return function(t,i,a){try{return Promise.resolve(G(function(){return Promise.resolve((n.mode==="sync"?Ne:Ce)(e,t,o)).then(function(s){return a.shouldUseNativeValidation&&P.validateFieldsNatively({},a),{errors:{},values:n.raw?Object.assign({},t):s}})},function(s){if((function(u){return u instanceof Oe})(s))return{values:{},errors:P.toNestErrors($e(s.issues,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw s}))}catch(s){return Promise.reject(s)}};throw new Error("Invalid input: not a Zod schema")}const ze=(e,o)=>async n=>{await fetch(e,{method:o,body:JSON.stringify(n)}).then(async t=>{console.log(t)})},Ye=({form:e,children:o,action:n,method:t="post",onSubmit:i,...a})=>{const s=i||ze(n??"",t);return l.jsx(y.FormProvider,{...e,children:l.jsx("form",{action:n,method:t,onSubmit:e.handleSubmit(s),noValidate:!0,...a,children:l.jsx("fieldset",{children:o})})})};function Me(e,o){return y.useForm({...o,resolver:De(e)})}function te(...e){const o=[];for(let n=0;n<e.length;n+=1){const t=e[n];Array.isArray(t)?o.push(te.apply(null,t)):typeof t=="object"?Object.entries(t).map(([i,a])=>a?o.push(i):!0):typeof t=="string"&&o.push(t.trim())}return o.join(" ")}function S(e){return({label:n,...t})=>{const{isSubmitted:i}=y.useFormState(),a=Ve(t?.name??""),s=t?.id||h.useId();return l.jsxs(D,{label:n,id:s,required:t?.required||!1,hasError:!!a,isSubmitted:i,children:[l.jsx(e,{...t,id:s}),a&&l.jsx(ne,{error:a})]})}}const D=h.memo(({id:e,label:o,required:n,hasError:t,isSubmitted:i,children:a})=>l.jsxs("div",{className:te("field-control",{required:n,"is-invalid":t,"is-valid":!t&&i}),children:[o&&l.jsx("label",{htmlFor:e,children:o||null}),a]}));D.displayName="FieldControl";const Ve=e=>{const{errors:o,isSubmitted:n}=y.useFormState({name:e});if(!n)return;const t=e.split(".");let i=o;for(const a of t)i=i?.[a]||void 0;return Array.isArray(i)&&(i=i[0]),i},ne=h.memo(({error:e})=>e&&l.jsx("div",{className:"field-error","data-error-type":e?.type||null,children:e?.message||null}));ne.displayName="ErrorMessage";class H extends Error{code;constructor(o,n,t){super(o,t),this.code=n,this.name="ServerError"}}const qe=({templateId:e})=>{const o=h.useRef(null);return h.useEffect(()=>{const n=document.getElementById(e);n&&o.current&&(o.current.innerHTML="",o.current.appendChild(n.content.cloneNode(!0)))},[]),l.jsx("div",{ref:o,className:"form-loading-indicator"})};async function oe(e){return fetch(e,{method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then(async o=>{if(o.status!==200)throw new H("server error",o.status);return await o.json().catch(n=>{throw new H("Bad response from server",500,{cause:n})})})}const Le=(e,o,n={})=>{const t={templateId:"form-loading-indicator",retry:!0,...n};return function(a){const[s,u]=h.useState(!0),[d,v]=h.useState(null),[E,b]=h.useState({}),[_,j]=h.useState(Date.now());h.useEffect(()=>{v(null),u(!0),oe(o).then(g=>{b(g)}).catch(g=>{v(g)}).finally(()=>u(!1))},[_]);const T=()=>{j(Date.now())};return s?l.jsx(qe,{templateId:t?.templateId}):d?l.jsxs("div",{className:"form-server-errors",children:[d?.message,t?.retry&&l.jsx("button",{type:"button",onClick:T,children:"Retry"})]}):l.jsx(e,{...a,...E})}},se=({name:e,type:o="text",...n})=>{const{register:t}=y.useFormContext();return l.jsx("input",{type:o,...t(e),...n})};se.displayName="FieldInput";const Ue=S(se),ae=({name:e,...o})=>{const{register:n}=y.useFormContext();return l.jsx("textarea",{...n(e),...o})};ae.displayName="FieldTextarea";const We=S(ae),ie=({name:e,children:o,...n})=>{const{register:t}=y.useFormContext();return l.jsx("select",{...t(e),...n,children:o})};ie.displayName="FieldNativeSelect";const Ze=S(ie),Je=(e,o)=>{const n=i=>i.flatMap(a=>a.options?n(a.options):[a]),t=n(o);return Array.isArray(e)?t.filter(i=>e.includes(i.value))||[]:t.find(i=>i.value===e)||null},ue=({name:e,options:o,...n})=>{const{resetField:t,formState:{defaultValues:i}}=y.useFormContext(),a=h.useRef(!1);return h.useEffect(()=>{const s=e.split(".");let u=i;for(const d of s)u=u?.[d]||null;t(e,{defaultValue:Je(u,o)}),a.current=!0},[]),l.jsx(y.Controller,{name:e,render:({field:s})=>l.jsx(je,{...s,value:a.current&&s.value,inputId:n?.id,options:o||[],...n,id:void 0})})};ue.displayName="FieldReactSelect";const Ge=S(ue),ce=({name:e,...o})=>l.jsx(y.Controller,{name:e,render:({field:n})=>l.jsx(Re,{...n,...o,selected:n.value||null})});ce.displayName="FieldDatepicker";const He=S(ce),Be=({name:e,...o})=>{const{register:n}=y.useFormContext();return l.jsx("input",{type:"hidden",...n(e),...o})},Xe=({label:e,...o})=>{const{isDirty:n,isSubmitting:t}=y.useFormState();return l.jsx("button",{type:"submit",disabled:!n||t,...o,children:e||""})};exports.FieldControl=D;exports.FieldDatepicker=He;exports.FieldHidden=Be;exports.FieldInput=Ue;exports.FieldNativeSelect=Ze;exports.FieldReactSelect=Ge;exports.FieldTextarea=We;exports.Form=Ye;exports.Submit=Xe;exports.createZodForm=Me;exports.fetchDefaultValues=oe;exports.withFieldControl=S;exports.withFormLoader=Le;
